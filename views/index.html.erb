<div class="container">
    <div class="table-holder">
    
    <div id="calendar"></div>

    <br><br>

    <table class="table table-condensed">
        <% @airings.each do |airing| %>
        <tr>
            <td><%= airing['AiringTime'].local.strftime('%m/%d') %></td>
            <td><%= airing['AiringTime'].local.strftime('%I:%M') %></td>

            <td><%= (airing['AiringTime'] + airing['Duration'].to_i * 60).local.strftime('%I:%M %P') %></td>

            <td><%= airing['Title'] %></td>
            <td><%= "s#{(airing['season'] || "").rjust(2, '0')}e#{(airing['episode'] || "").rjust(2, '0')}" %></td>
            <td><%= airing['EpisodeTitle'] %></td>
        </tr>
        <% end %>
    </table>

    </div>
</div>

<script type='text/javascript'>
    events = <%= @events.to_json %>;
    var es = [];
    for(var i = 0; i < events.length; i++) {
        e = events[i];
        es.push({
            title: e.title,
            start: new Date(e.start * 1000),
            end: new Date(e.end * 1000)
        });
    }

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        // put your options and callbacks here
        events: es
    });
</script>
